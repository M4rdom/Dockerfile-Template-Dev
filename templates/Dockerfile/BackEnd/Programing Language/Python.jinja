# Python Aplication Dockerfile
{% if Flask %}
# Fask Aplication Dockerfile
{% endif %}
{% if Django %}
# Django Aplication Dockerfile
{% endif %}




{%- if Python_Version_Tag %}

FROM python:{{Python_Version_Tag}}

{% elif Python_Version_Digest %}

FROM python@{{Python_Version_Digest}}

{% else %}

# Avoid using latest tag in production
FROM python:latest

{% endif -%}






WORKDIR /app

COPY . /app







{%- if Install_Python_Requirements %}


# Install the application dependencies
RUN pip install --no-cache-dir -r requirements.txt
{% endif -%}




{%- if Gunicorn %}
{% if Gunicorn_Install %}
{% if Custom_Gunicorn_Version %}

RUN pip install --no-cache-dir gunicorn=={{Gunicorn_Version}}

{% else %}

RUN pip install --no-cache-dir gunicorn

{% endif %}
{% endif %}
# Run the application using Gunicorn
CMD ["gunicorn", "-w", "{{workers}}", "-b", "{{interface}}:{{Port}}", "{{module}}:{{callable}}"]
{% endif %}






{%- if Custom_Exposed_Port %}

EXPOSE {{Port}}
{% else %}

# Make port 80 available to the world outside this container
EXPOSE 80
{% endif -%}